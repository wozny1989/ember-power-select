{"version":3,"file":"before-options.js","sources":["../../../src/components/power-select/before-options.hbs","../../../src/components/power-select/before-options.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{#if @searchEnabled}}\\n  <div class=\\\"ember-power-select-search\\\">\\n    {{!-- template-lint-disable require-input-label --}}\\n    <input type=\\\"search\\\"\\n      autocomplete=\\\"off\\\"\\n      autocorrect=\\\"off\\\"\\n      autocapitalize=\\\"off\\\"\\n      spellcheck={{false}}\\n      class=\\\"ember-power-select-search-input\\\"\\n      value={{@select.searchText}}\\n      role={{or @role \\\"combobox\\\"}}\\n      aria-activedescendant={{@ariaActiveDescendant}}\\n      aria-controls={{@listboxId}}\\n      aria-owns={{@listboxId}}\\n      aria-autocomplete=\\\"list\\\"\\n      aria-haspopup=\\\"listbox\\\"\\n      aria-expanded={{if @select.isOpen \\\"true\\\" \\\"false\\\"}}\\n      placeholder={{@searchPlaceholder}}\\n      aria-label={{@ariaLabel}}\\n      aria-labelledby={{@ariaLabelledBy}}\\n      aria-describedby={{@ariaDescribedBy}}\\n      {{on \\\"input\\\" this.handleInput}}\\n      {{on \\\"focus\\\" @onFocus}}\\n      {{on \\\"blur\\\" @onBlur}}\\n      {{on \\\"keydown\\\" this.handleKeydown}}\\n      {{this.setupInput}}\\n    >\\n  </div>\\n{{/if}}\")","import Component from '@glimmer/component';\nimport { runTask } from 'ember-lifeline';\nimport { action } from '@ember/object';\nimport { modifier } from 'ember-modifier';\nimport type { Select } from '../power-select';\nimport { deprecate } from '@ember/debug';\n\ninterface PowerSelectBeforeOptionsSignature {\n  Element: HTMLElement;\n  Args: {\n    select: Select;\n    searchEnabled: boolean;\n    ariaLabel?: string;\n    ariaLabelledBy?: string;\n    ariaDescribedBy?: string;\n    role?: string;\n    searchPlaceholder?: string;\n    ariaActiveDescendant?: string;\n    listboxId?: string;\n    onKeydown: (e: KeyboardEvent) => false | void;\n    onBlur: (e: FocusEvent) => void;\n    onFocus: (e: FocusEvent) => void;\n    onInput: (e: InputEvent) => boolean;\n    autofocus?: boolean;\n  };\n}\n\nexport default class PowerSelectBeforeOptionsComponent extends Component<PowerSelectBeforeOptionsSignature> {\n  didSetup: boolean = false;\n\n  @action\n  clearSearch(): void {\n    deprecate(\n      'You are using power-select before-option component with ember/render-modifier. Replace {{will-destroy this.clearSearch}} with {{this.setupInput}}.',\n      false,\n      {\n        for: 'ember-power-select',\n        id: 'ember-power-select.no-at-ember-render-modifiers',\n        since: {\n          enabled: '8.1',\n          available: '8.1',\n        },\n        until: '9.0.0',\n      },\n    );\n\n    this.args.select.actions?.search('');\n  }\n\n  @action\n  handleKeydown(e: KeyboardEvent): false | void {\n    if (this.args.onKeydown(e) === false) {\n      return false;\n    }\n    if (e.keyCode === 13) {\n      this.args.select.actions.close(e);\n    }\n  }\n\n  @action\n  handleInput(event: Event): false | void {\n    const e = event as InputEvent;\n    if (this.args.onInput(e) === false) {\n      return false;\n    }\n  }\n\n  @action\n  focusInput(el: HTMLElement) {\n    deprecate(\n      'You are using power-select before-option component with ember/render-modifier. Replace {{did-insert this.focusInput}} with {{this.setupInput}}.',\n      false,\n      {\n        for: 'ember-power-select',\n        id: 'ember-power-select.no-at-ember-render-modifiers',\n        since: {\n          enabled: '8.1',\n          available: '8.1',\n        },\n        until: '9.0.0',\n      },\n    );\n\n    this._focusInput(el);\n  }\n\n  setupInput = modifier(\n    (el: HTMLElement) => {\n      if (this.didSetup) {\n        return;\n      }\n\n      this.didSetup = true;\n\n      this._focusInput(el);\n\n      return () => {\n        this.args.select.actions?.search('');\n      };\n    },\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    { eager: false },\n  );\n\n  private _focusInput(el: HTMLElement) {\n    runTask(\n      this,\n      () => {\n        if (this.args.autofocus !== false) {\n          el.focus();\n        }\n      },\n      0,\n    );\n  }\n}\n"],"names":["PowerSelectBeforeOptionsComponent","Component","didSetup","clearSearch","deprecate","for","id","since","enabled","available","until","args","select","actions","search","n","prototype","action","handleKeydown","e","onKeydown","keyCode","close","handleInput","event","onInput","focusInput","el","_focusInput","setupInput","modifier","eager","runTask","autofocus","focus","setComponentTemplate","TEMPLATE"],"mappings":"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"}